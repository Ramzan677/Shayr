<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shayari - Ramzan Ahsan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: #020617;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .glass {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .poetry-text {
            font-family: 'Playfair Display', serif;
            line-height: 1.8;
            white-space: pre-line;
        }
        
        /* Active state for category buttons */
        .cat-active {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.2)) !important;
            border-color: rgba(165, 180, 252, 0.5) !important;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
            color: #a5b4fc !important;
        }
        .cat-active i {
            color: #818cf8;
        }

        /* Refresh button gradient and shadow */
        .refresh-gradient {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.4);
        }
        .refresh-gradient:hover {
            box-shadow: 0 20px 35px -5px rgba(99, 102, 241, 0.5);
        }

        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-custom {
            animation: spin-slow 1s linear infinite;
        }
    </style>
</head>
<body class="p-6 min-h-screen flex items-center justify-center text-white">

    <div id="app" class="glass w-full max-w-lg p-10 md:p-14 text-center shadow-2xl rounded-[3.5rem]">
        <!-- Brand Header -->
        <header class="mb-12">
            <h1 class="text-4xl font-black bg-clip-text text-transparent bg-gradient-to-br from-indigo-400 via-purple-400 to-pink-400">
                Shayari
            </h1>
            <p class="text-gray-500 text-[10px] mt-2 uppercase tracking-[0.5em] font-bold">
                Developed by Ramzan Ahsan
            </p>
        </header>

        <!-- Category Controls -->
        <div class="grid grid-cols-2 gap-3 mb-12">
            <button onclick="changeCategory('romantic', this)" class="cat-btn cat-active flex items-center justify-center gap-2 px-6 py-3 rounded-full text-[12px] font-semibold transition-all duration-300 border border-white/5 bg-white/[0.03] hover:bg-white/[0.08] active:scale-95">
                <i data-lucide="heart" class="w-4 h-4"></i>
                Romantic
            </button>
            <button onclick="changeCategory('sad', this)" class="cat-btn flex items-center justify-center gap-2 px-6 py-3 rounded-full text-[12px] font-semibold transition-all duration-300 border border-white/5 bg-white/[0.03] hover:bg-white/[0.08] active:scale-95">
                <i data-lucide="cloud-rain" class="w-4 h-4"></i>
                Sad
            </button>
            <button onclick="changeCategory('funny', this)" class="cat-btn flex items-center justify-center gap-2 px-6 py-3 rounded-full text-[12px] font-semibold transition-all duration-300 border border-white/5 bg-white/[0.03] hover:bg-white/[0.08] active:scale-95">
                <i data-lucide="smile" class="w-4 h-4"></i>
                Funny
            </button>
            <button onclick="changeCategory('friend', this)" class="cat-btn flex items-center justify-center gap-2 px-6 py-3 rounded-full text-[12px] font-semibold transition-all duration-300 border border-white/5 bg-white/[0.03] hover:bg-white/[0.08] active:scale-95">
                <i data-lucide="users" class="w-4 h-4"></i>
                Friend
            </button>
        </div>

        <!-- Content Area -->
        <div class="min-h-[220px] flex items-center justify-center relative mb-12 px-2">
            <p id="shayari-text" class="poetry-text text-xl md:text-2xl italic text-gray-200 opacity-0 transition-opacity duration-700">
                Opening the world of poetry...
            </p>
            
            <!-- Loading Overlay (Centered) -->
            <div id="loader" class="absolute inset-0 flex items-center justify-center hidden">
                <div class="w-10 h-10 border-2 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin"></div>
            </div>
        </div>

        <!-- Main Action Button -->
        <button onclick="fetchSecureShayari()" id="btn" class="refresh-gradient flex items-center justify-center gap-3 w-full text-white font-extrabold py-5 rounded-3xl transition-all duration-300 transform active:scale-[0.98] uppercase tracking-[0.2em] text-xs">
            <i id="btn-icon" data-lucide="sparkles" class="w-4 h-4"></i>
            Refresh <span id="current-cat-label">Romantic</span>
        </button>

        <!-- Footer -->
        <footer class="mt-14 text-[9px] text-gray-700 uppercase font-black tracking-[0.3em] border-t border-white/5 pt-8">
            Developed by Ramzan Ahsan
        </footer>
    </div>

    <script>
        const API_URL = "https://ramzan-shayri.deno.dev/";
        let currentCategory = 'romantic';

        // Initialize icons
        lucide.createIcons();

        // Anti-DevTools
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = function(e) {
            if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || (e.ctrlKey && e.keyCode == 85)) {
                return false;
            }
        };

        function changeCategory(cat, btn) {
            if (currentCategory === cat) return;
            currentCategory = cat;
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('cat-active'));
            btn.classList.add('cat-active');
            document.getElementById('current-cat-label').innerText = cat;
            fetchSecureShayari();
        }

        async function fetchSecureShayari() {
            const textEl = document.getElementById('shayari-text');
            const loader = document.getElementById('loader');
            const btn = document.getElementById('btn');
            const icon = document.getElementById('btn-icon');

            btn.disabled = true;
            icon.classList.add('animate-spin-custom');
            loader.classList.remove('hidden');
            textEl.classList.add('opacity-0');

            try {
                const response = await fetch(`${API_URL}?cat=${currentCategory}&cache=${Date.now()}`);
                if (!response.ok) throw new Error();
                const data = await response.json();
                if (data.status) {
                    textEl.innerText = data.shayari;
                }
            } catch (err) {
                textEl.innerText = "Connection lost. Please refresh or check your internet.";
            } finally {
                loader.classList.add('hidden');
                textEl.classList.remove('opacity-0');
                btn.disabled = false;
                icon.classList.remove('animate-spin-custom');
            }
        }

        window.onload = fetchSecureShayari;
    </script>
</body>
</html>
